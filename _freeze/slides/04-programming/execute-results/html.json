{
  "hash": "c24dc3c17adad8e1127013b003bd566d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"You RRR a Beginner: Data Types and Structures üë®‚Äçüíª\"\ntitle-slide-attributes:\n  data-background-image: ../images/bg.png\n  # data-background-size: stretch\n  # data-slide-number: none\nformat: \n  live-revealjs: \n    output-file: 04-programming-slides.html\nwebr:\n  cell-options:\n    autorun: false\n  # packages:\n  #   - tidyverse\nknitr:\n  opts_chunk:\n    out-width: 100%\n    echo: true\n---\n\n\n# {visibility=\"hidden\"}\n\n\\def\\bx{\\mathbf{x}}\n\\def\\bg{\\mathbf{g}}\n\\def\\bw{\\mathbf{w}}\n\\def\\bbeta{\\boldsymbol \\beta}\n\\def\\bX{\\mathbf{X}}\n\\def\\by{\\mathbf{y}}\n\\def\\bH{\\mathbf{H}}\n\\def\\bI{\\mathbf{I}}\n\\def\\bS{\\mathbf{S}}\n\\def\\bW{\\mathbf{W}}\n\\def\\T{\\text{T}}\n\\def\\cov{\\mathrm{Cov}}\n\\def\\cor{\\mathrm{Corr}}\n\\def\\var{\\mathrm{Var}}\n\\def\\E{\\mathrm{E}}\n\\def\\bmu{\\boldsymbol \\mu}\n\\DeclareMathOperator*{\\argmin}{arg\\,min}\n\\def\\Trace{\\text{Trace}}\n\n\n\n\n<!-- begin: webr fodder -->\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n\n<!-- end: webr fodder -->\n\n\n## R is a Calculator - Arithmetic Operators\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](./images/04-programming/arithmetic_operator.png){fig-align='center' width=100%}\n:::\n:::\n\n\n::: notes\n\n- We are already equipped with the tools we need for doing statistics in this course. Now it's time to program in R.\n- We are going to go through basic R syntax and its commonly used data structures.\n- Because some of you have no experience in R, this introduction is a must, because I want to make sure everyone is on the same page. \n- If you are already familiar with basic R syntax, please bear with me. You can learn more advanced stuff by yourself. OK.\n- First, as many other languages, R is a calculator. We can do basic arithmetic operations using R.\n- To get the remainder of division, we use two percentage symbols.\n- To get the quotient of division, we use percent, slash and percent symbol.\n\n:::\n\n\n## R is a Calculator - Examples\n\n<!-- # ```{r} -->\n<!-- # #| label: arithmetic-example -->\n<!-- # #| echo: true -->\n<!-- # 2 + 3 * 5 + 4 -->\n<!-- # 2 + 3 * (5 + 4) -->\n<!-- # ``` -->\n\n::: small\n\n::: {.cell layout-align=\"center\"}\n```{webr}\n2 + 3 * 5 + 4\n```\n:::\n\n\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\n5 / 10 ^ 2\n```\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\n2 + 3 * (5 + 4)\n```\n:::\n\n\n:::\n\n- We have to do the operation in the parenthesis first\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](./images/04-programming/pemdas.jpeg){fig-align='center' width=100%}\n:::\n:::\n\n\n\n## R Does Comparisons - Logical Operators\n\n\n\n:::: columns\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](./images/04-programming/logical_operator.png){fig-align='center' width=90%}\n:::\n:::\n\n\n:::\n\n\n::: {.column width=\"50%\"}\n\n::: fragment\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n5 <= 5\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\n5 <= 4\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\n# Is 5 NOT equal to 5? FALSE\n5 != 5\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\nTRUE != FALSE\n!TRUE == FALSE\n```\n:::\n\n\n:::\n\n:::\n\n::::\n\n<!-- ## R Can Do Comparisons - Examples {visibility=\"hidden\"} -->\n\n\n<!-- ::::: columns -->\n\n<!-- ::: {.column width=\"50%\"} -->\n\n<!-- ```{r} -->\n<!-- 5 <= 5 -->\n<!-- 5 <= 4 -->\n<!-- # Is 5 NOT equal to 5? FALSE -->\n<!-- 5 != 5 -->\n<!-- ``` -->\n\n<!-- ::: -->\n\n<!-- ::: {.column width=\"50%\"} -->\n\n<!-- ::: fragment -->\n\n<!-- ```{r} -->\n<!-- ## Is TRUE not equal to FALSE? -->\n<!-- TRUE != FALSE -->\n<!-- ## Is not TRUE equal to FALSE? -->\n<!-- !TRUE == FALSE -->\n<!-- ## TRUE if either one is TRUE or both are TRUE -->\n<!-- TRUE | FALSE -->\n<!-- ``` -->\n\n<!-- ::: -->\n\n<!-- ::: -->\n\n<!-- ::::: -->\n\n<!-- . . . -->\n\n<!-- ::: question -->\n\n<!-- What does `TRUE & FALSE` return? -->\n\n<!-- ::: -->\n\n\n\n## Build-in Functions\n\n- R has lots of built-in functions, especially for mathematics, probability and statistics.\n\n\n:::: columns\n\n::: {.column width=\"50%\"}\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](./images/04-programming/numeric_fcns.png){fig-align='center' width=90%}\n:::\n:::\n\n\n:::\n\n\n::: {.column width=\"50%\"}\n\n::: fragment\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsqrt(144)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 12\n```\n\n\n:::\n\n```{.r .cell-code}\nexp(1)  ## Euler's number\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2.718282\n```\n\n\n:::\n\n```{.r .cell-code}\nsin(pi/2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1\n```\n\n\n:::\n\n```{.r .cell-code}\nabs(-7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 7\n```\n\n\n:::\n:::\n\n\n:::\n\n:::\n\n::::\n\n\n\n<!-- ## Build-in Functions - Examples {visibility=\"hidden\"} -->\n\n\n<!-- ::::: columns -->\n\n<!-- ::: {.column width=\"50%\"} -->\n<!-- ```{r builtin-fcns} -->\n<!-- sqrt(144) -->\n<!-- exp(1)  ## Euler's number -->\n<!-- sin(pi/2) -->\n<!-- abs(-7) -->\n<!-- ``` -->\n<!-- ::: -->\n\n\n\n<!-- ::: {.column width=\"50%\"} -->\n\n<!-- ::: fragment -->\n\n<!-- ```{r} -->\n<!-- factorial(5) -->\n<!-- ## without specifying base value -->\n<!-- ## it is a natural log with base e -->\n<!-- log(100) -->\n<!-- ## log function and we specify base = 2 -->\n<!-- log(100, base = 10) -->\n<!-- ``` -->\n\n<!-- ::: -->\n\n<!-- ::: -->\n\n<!-- :::: -->\n\n\n\n\n## Commenting {visibility=\"hidden\"}\n\n\n::: question\nYou've seen comments a lot! How do we write a comment in R?\n:::\n\n. . .\n\n- Use `#` to add a comment so that the text after `#` is not read as an R command.\n\n- Writing (good) comments is highly recommended: help readers and more importantly yourself understand what the code is doing.\n\n- Comments should explain the **why**, not the what.\n\n\n## {visibility=\"hidden\"}\n\n\n::::: columns\n\n\n::: {.column width=\"50%\"}\n::: tiny\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![https://www.reddit.com/r/ProgrammerHumor/comments/8w54mx/code_comments_be_like/](./images/04-programming/cat_comment.png){fig-align='center' width=100%}\n:::\n:::\n\n:::\n:::\n\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](./images/04-programming/stop_comment.png){fig-align='center' width=100%}\n:::\n:::\n\n\n:::\n\n\n:::::\n\n\n\n## Objects and Funtions in R {visibility=\"hidden\"}\n\n> <span style=\"color:red\"> Everything that **exists** is an **object**. </span>\n<span style=\"color:red\"> Everything that **happens** is a **function call**. </span>  \n  -- *[John Chambers](https://bit.ly/3yJJGrC), the creator of the S programming language*.\n\n- We have made lots of things happened!\n\n- Even arithmetic and logical operators are functions!\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n`+`(x = 2, y = 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5\n```\n\n\n:::\n\n```{.r .cell-code}\n`&`(TRUE, FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n\n## Creating Variables\n\n- A variable stores a value that can be changed according to our need.\n\n- Use `<-` operator to **assign** a value to the variable. (Highly recommendedüëç)\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nx <- 5  ## we create an object, value 5, and call it x, which is a variable.\nx  ## type the variable name to see the value stored in the object x\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 5\n```\n\n\n:::\n:::\n\n\n<!-- - Can also use `=` symbol to do assignment. (‚ùå Does not work in some situations) -->\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n(x <- x + 6)  # We can reassign any value to the variable we created\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 11\n```\n\n\n:::\n\n```{.r .cell-code}\nx == 5  # We can perform any operations on variables\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n\n```{.r .cell-code}\nlog(x) # Variables can also be used in any built-in functions\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2.397895\n```\n\n\n:::\n:::\n\n\n\n#\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n[![](./images/04-programming/r_assign_syntax.jpg){fig-align='center' width=85%}](https://colinfay.me/r-assignment/)\n:::\n:::\n\n\n<!-- <div class=\"absolute\" style=\"bottom: 20px; left: 50px;\"> -->\n<!--   [Why do we use arrow as an assignment operator](https://colinfay.me/r-assignment/) -->\n<!-- </div> -->\n\n\n\n\n\n## Bad Naming {visibility=\"hidden\"}\n\n- ‚ùå Unless you have a very good reason, don't create a variable whose name is the same as any R [*built-in constant*](https://stat.ethz.ch/R-manual/R-devel/library/base/html/Constants.html) or function!\n\n- üòü It causes lots of confusion when your code is long and when others read your code.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n## THIS IS BAD CODING! DON'T DO THIS!\npi  ## pi is a built-in constant\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3.141593\n```\n\n\n:::\n\n```{.r .cell-code}\n(pi <- 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 20\n```\n\n\n:::\n\n```{.r .cell-code}\nabs ## abs is a built-in function\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nfunction (x)  .Primitive(\"abs\")\n```\n\n\n:::\n\n```{.r .cell-code}\n(abs <- abs(pi))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 20\n```\n\n\n:::\n:::\n\n\n# Object Types\n\n## Types of Variables\n\n- Use **`typeof()`** to check which type a variable belongs to.\n\n- Common types include **`character`**, **`double`**, **`integer`** and **`logical`**.\n\n- Check if it‚Äôs of a specific type: **`is.character()`**, **`is.double()`**, **`is.integer()`**, **`is.logical()`**.\n<!-- - To specify an integer, we type a number followed by letter `L`.  -->\n\n::::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntypeof(5)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"double\"\n```\n\n\n:::\n\n```{.r .cell-code}\ntypeof(5L)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"integer\"\n```\n\n\n:::\n\n```{.r .cell-code}\ntypeof(\"I_love_stat\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"character\"\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntypeof(1 > 3)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"logical\"\n```\n\n\n:::\n\n```{.r .cell-code}\nis.double(5L)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] FALSE\n```\n\n\n:::\n:::\n\n:::\n\n:::::\n\n\n## Variable Types in R and in Statistics\n\n- Type `character` and `logical` correspond to **categorical** variables.\n\n- Type `logical` is a special type of categorical variables that has only two categories (**binary**).\n\n<!-- - We usually call it a **binary** variable. -->\n- Type `double` and `integer` correspond to **numerical** variables. (an exception later)\n  + Type `double` is for **continuous** variables\n  + Type `integer` is for **discrete** variables.\n\n\n\n\n##\n\n::: {.your-turn}\n<br>\n\n- Create a variable `age` that stores your age. Check what type it is.\n\n- Create a variable `name` that stores your name. Check its type.\n\n- Create a variable `is_male` that stores whether you are male (true/false). Check its type.\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\n\n```\n:::\n\n\n\n::: {.content-visible when-format=\"revealjs\"}\n{{< countdown minutes=2 font-size=\"3rem\" >}}\n:::\n\n\n# R Data Structures\n\n- ### Vector\n- ### Factor\n<!-- - ### List -->\n- ### Matrix\n- ### Data Frame\n<!-- - ### Data Frame -->\n\n## (Atomic) Vector\n\n- To create a vector, use `c()`, short for *concatenate* or *combine*.\n\n- **All** elements of a vector must be of the **same type**. \n\n::::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n(dbl_vec <- c(1, 2.5, 4.5)) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1.0 2.5 4.5\n```\n\n\n:::\n\n```{.r .cell-code}\n(chr_vec <- c(\"pretty\", \"girl\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"pretty\" \"girl\"  \n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n## check how many elements in a vector\nlength(dbl_vec) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n\n```{.r .cell-code}\n## check a compact description of \n## any R data structure\nstr(dbl_vec) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:3] 1 2.5 4.5\n```\n\n\n:::\n:::\n\n:::\n\n:::::\n\n\n## Operations on Vectors\n\n- We can do any operations on vectors as we do on a *scalar* variable (vector of length 1).\n\n::::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Create two vectors\nv1 <- c(3, 8)\nv2 <- c(4, 100) \n\n## All operations happen element-wisely\n# Vector addition\nv1 + v2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]   7 108\n```\n\n\n:::\n\n```{.r .cell-code}\n# Vector subtraction\nv1 - v2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  -1 -92\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# Vector multiplication\nv1 * v2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  12 800\n```\n\n\n:::\n\n```{.r .cell-code}\n# Vector division\nv1 / v2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.75 0.08\n```\n\n\n:::\n\n```{.r .cell-code}\nsqrt(v2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  2 10\n```\n\n\n:::\n:::\n\n:::\n\n:::::\n\n\n\n## Recycling of Vectors\n\n- If we apply arithmetic operations to two vectors of **unequal** length, the elements of the shorter vector will be **recycled** to complete the operations.\n<!-- - Beware of recycling! -->\n<!-- - The concept of *recycling* helps us write more concise code. -->\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nv1 <- c(3, 8, 4, 5)\n# The following 2 operations are the same\nv1 * 2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  6 16  8 10\n```\n\n\n:::\n\n```{.r .cell-code}\nv1 * c(2, 2, 2, 2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  6 16  8 10\n```\n\n\n:::\n\n```{.r .cell-code}\nv3 <- c(4, 11)\nv1 + v3  ## v3 becomes c(4, 11, 4, 11) when doing the operation\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  7 19  8 16\n```\n\n\n:::\n:::\n\n\n\n## Subsetting Vectors\n\n- To extract element(s) in a vector, use a pair of brackets `[]` with element indexing.\n\n- The indexing **starts with 1**.\n\n::::: columns\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nv1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3 8 4 5\n```\n\n\n:::\n\n```{.r .cell-code}\nv2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]   4 100\n```\n\n\n:::\n\n```{.r .cell-code}\n## The 3rd element\nv1[3]  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4\n```\n\n\n:::\n:::\n\n:::\n\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nv1[c(1, 3)]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3 4\n```\n\n\n:::\n\n```{.r .cell-code}\n## extract all except a few elements\n## put a negative sign before the vector of \n## indices\nv1[-c(2, 3)] \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3 5\n```\n\n\n:::\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n:::\n\n:::::\n\n\n## Factor\n\n- A vector of type `factor` can be *ordered in a meaningful way.* Create a factor by `factor()`. \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## Create a factor from a character vector using function factor()\n(fac <- factor(c(\"med\", \"high\", \"low\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] med  high low \nLevels: high low med\n```\n\n\n:::\n:::\n\n\n. . .\n\n\n- It is a type of **integer**, not **character**. üò≤  üôÑ \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ntypeof(fac)  ## The type is integer.\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"integer\"\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nstr(fac)  ## The integers show the level each element in vector fac belongs to.\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Factor w/ 3 levels \"high\",\"low\",\"med\": 3 1 2\n```\n\n\n:::\n:::\n\n\n. . .\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\norder_fac <- factor(c(\"med\", \"high\", \"low\"), levels = c(\"low\", \"med\", \"high\"))\nstr(order_fac)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Factor w/ 3 levels \"low\",\"med\",\"high\": 2 3 1\n```\n\n\n:::\n:::\n\n\n\n::: notes\nlevels(fac) ## Each level represents an integer, ordered from the vector alphabetically.\n:::\n\n\n\n## List (Generic Vectors) {visibility=\"hidden\"}\n\n- Lists are different from (atomic) vectors: Elements can be of **any type**, including lists.\n\n- Construct a list by using **`list()`**.\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## a list of 3 elements of different types\nx_lst <- list(idx = 1:3, \n              \"a\", \n              c(TRUE, FALSE))\n```\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n\n```\n$idx\n[1] 1 2 3\n\n[[2]]\n[1] \"a\"\n\n[[3]]\n[1]  TRUE FALSE\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nstr(x_lst)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 3\n $ idx: int [1:3] 1 2 3\n $    : chr \"a\"\n $    : logi [1:2] TRUE FALSE\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nnames(x_lst)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"idx\" \"\"    \"\"   \n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nlength(x_lst)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n:::\n\n:::\n::::\n\n\n## Subsetting a List {visibility=\"hidden\"}\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n<br>\n**Return an <span style=\"color:red\"> element </span> of a list**\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## subset by name (a vector)\nx_lst$idx  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2 3\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## subset by indexing (a vector)\nx_lst[[1]]  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 2 3\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ntypeof(x_lst$idx)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"integer\"\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n::: {.fragment}\n<br>\n**Return a <span style=\"color:red\"> sub-list </span> of a list**\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## subset by name (still a list)\nx_lst[\"idx\"]  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$idx\n[1] 1 2 3\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## subset by indexing (still a list)\nx_lst[1]  \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$idx\n[1] 1 2 3\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ntypeof(x_lst[\"idx\"])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"list\"\n```\n\n\n:::\n:::\n\n:::\n:::\n::::\n\n::: notes\n- This is where we should pay more attention to. When we subset a list, it may return an element of the list, or it returns a sub-list of the list.\n- Let's see how it happens. \n- This is our x_lst. We can subset a list by name or by indexing. \n- Suppose we want the first element of the list, we can get it by its name using x_lst$idx.\n- We can also obtain it by using indexing like x_lst[[1]] because we want the first element.\n- Notice that the way we subset a list returns an integer vector, the real first element of the list, not a list. \n- Let's see another case on the right.\n- We can also subset by name using single pair of brackets, and put the name inside the brackets.\n- Or we can subset by indexing, again using single pair of brackets.\n- And you see what happened? The way we subset a list here returns a sub-list, not the element itself. \n- So please be careful when subsetting a list. \n- If you want a vector, use these ways. If you want to keep it as a list, use these ways.\n:::\n\n## {visibility=\"hidden\"}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](./images/04-programming/list_condiment.png){fig-align='center' width=100%}\n:::\n:::\n\n\n::: notes\npepper packet\npepper shaker\n:::\n\n\n\n## {visibility=\"hidden\"}\n\n> If list `x` is a train carrying objects, then `x[[5]]` is\n> the object in car 5; `x[4:6]` is a train of cars 4-6.\n>\n> --- \\@RLangTip, <https://twitter.com/RLangTip/status/268375867468681216>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](https://raw.githubusercontent.com/hadley/adv-r/master/diagrams/subsetting/train.png){fig-align='center' width=100%}\n:::\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](https://raw.githubusercontent.com/hadley/adv-r/master/diagrams/subsetting/train-single.png){fig-align='center' width=100%}\n:::\n:::\n\n\n\n## Matrix\n\n- A matrix is a *two-dimensional analog of a vector* with **attribute** `dim`.\n- Use command `matrix()` to create a matrix.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## Create a 3 by 2 matrix called mat\n(mat <- matrix(data = 1:6, nrow = 3, ncol = 2)) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1] [,2]\n[1,]    1    4\n[2,]    2    5\n[3,]    3    6\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ndim(mat); nrow(mat); ncol(mat)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3 2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2\n```\n\n\n:::\n:::\n\n\n\n::: notes\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n# elements are arranged by row\nmatrix(data = 1:6, \n       nrow = 3, \n       ncol = 2, \n       byrow = TRUE) #<<\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1] [,2]\n[1,]    1    2\n[2,]    3    4\n[3,]    5    6\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nattributes(mat)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$dim\n[1] 3 2\n```\n\n\n:::\n:::\n\n:::\n\n\n## Subsetting a Matrix \n\n- Use the same indexing approach as vectors on rows and columns.\n- Use comma `,` to separate row and column index.\n- `mat[2, 2]` extracts the element of the second row and second column.\n\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nmat\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n     [,1] [,2]\n[1,]    1    4\n[2,]    2    5\n[3,]    3    6\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## all rows and 2nd column\n## leave row index blank\n## specify 2 in coln index\nmat[, 2]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 4 5 6\n```\n\n\n:::\n:::\n\n:::\n\n\n::: {.column width=\"50%\"}\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## 2nd row and all columns\nmat[2, ] \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 2 5\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## The 1st and 3rd rows and the 1st column\nmat[c(1, 3), 1] \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1 3\n```\n\n\n:::\n:::\n\n:::\n::::\n\n\n## Data Frame: The Most Common Way of Storing Datasets\n\n- A data frame is of type **list** of *equal-length* vectors, having a *2-dimensional* structure.\n\n- More general than matrix: *Different columns can have different types*.\n\n- Use `data.frame()` that takes *named* vectors as input \"element\".\n\n\n<!-- :::: {.columns} -->\n\n<!-- ::: {.column width=\"50%\"} -->\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## data frame w/ an dbl column named age and char columns gen and col.\n(df <- data.frame(age = c(19, 21, 40), gen = c(\"m\", \"f\", \"m\"), col = c(\"r\",\"b\",\"g\")))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age gen col\n1  19   m   r\n2  21   f   b\n3  40   m   g\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nstr(df)  ## use $ to represent column elements \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t3 obs. of  3 variables:\n $ age: num  19 21 40\n $ gen: chr  \"m\" \"f\" \"m\"\n $ col: chr  \"r\" \"b\" \"g\"\n```\n\n\n:::\n:::\n\n\n. . .\n\n::: question\nWhat happen if we create a data frame without column names?\n:::\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\ndata.frame(c(19, 21, 40), c(\"m\", \"f\", \"m\"))\n```\n:::\n\n\n## Data Structure Comparison\n\n::: tiny\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![https://environmentalcomputing.net/getting-started-with-r/data-types-structure/](./images/04-programming/data_structure.png){fig-align='center' width=100%}\n:::\n:::\n\n\n:::\n\n<!-- ::: -->\n\n<!-- ::: {.column width=\"50%\"} -->\n\n<!-- # ```{r} -->\n<!-- # #| label: dataframe2 -->\n<!-- # #| echo: true -->\n<!-- # #| code-line-numbers: false -->\n<!-- # ## must set column names -->\n<!-- # ## or they are ugly and non-recognizable -->\n<!-- # data.frame(c(19, 21, 40), c(\"m\", \"f\", \"m\"))  -->\n<!-- # ``` -->\n<!-- ::: -->\n<!-- :::: -->\n\n\n## Properties of Data Frames\n\nData frame has properties of matrix.\n\n<!-- :::: {.columns} -->\n\n<!-- ::: {.column width=\"40%\"} -->\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age gen col\n1  19   m   r\n2  21   f   b\n3  40   m   g\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ncolnames(df)  ## df as a matrix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"age\" \"gen\" \"col\"\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\nncol(df) ## df as a matrix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ndim(df) ## df as a matrix\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 3 3\n```\n\n\n:::\n:::\n\n<!-- ::: -->\n\n\n<!-- ::: {.column width=\"60%\"} -->\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n<!-- ::: -->\n<!-- :::: -->\n\n\n## Subsetting a Data Frame\n\n<!-- Can use either list or matrix subsetting methods. -->\n\n:::: {.columns}\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age gen col\n1  19   m   r\n2  21   f   b\n3  40   m   g\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## Subset rows\ndf[c(1, 3), ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age gen col\n1  19   m   r\n3  40   m   g\n```\n\n\n:::\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## Subset columns\ndf[, c(\"age\", \"col\")]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age col\n1  19   r\n2  21   b\n3  40   g\n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.column width=\"50%\"}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-line-numbers=\"false\"}\n## select the row where age == 21\ndf[df$age == 21, ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age gen col\n2  21   f   b\n```\n\n\n:::\n:::\n\n\n:::\n\n::::\n\n::: notes\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nstr(df[\"age\"])  ## a data frame with one column\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t3 obs. of  1 variable:\n $ age: num  19 21 40\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(df[, \"age\"])  ## becomes a vector by default\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:3] 19 21 40\n```\n\n\n:::\n\n```{.r .cell-code}\n## like a list\ndf$age\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 19 21 40\n```\n\n\n:::\n\n```{.r .cell-code}\ndf[c(\"age\", \"gen\")] \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  age gen\n1  19   m\n2  21   f\n3  40   m\n```\n\n\n:::\n:::\n\n\n:::\n\n\n##\n\n::: {.your-turn}\n<br>\n\n- Create a vector object called `x` that has 5 elements 3, 6, 2, 9, 14.\n- Compute the average of elements of `x`.\n- Subset the `mtcars` data set by selecting variables `mpg` and `disp`.\n- Select the cars (rows) in `mtcars` that have 4 cylinders.\n\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\n\n```\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n```{webr}\n\n```\n:::\n\n\n\n::: {.content-visible when-format=\"revealjs\"}\n{{< countdown minutes=5 font-size=\"3rem\" >}}\n:::\n\n\n\n\n::: notes\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nx <- c(3, 6, 2, 9, 14)\nmean(x)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 6.8\n```\n\n\n:::\n\n```{.r .cell-code}\nmtcars[, c(\"mpg\", \"disp\")]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                     mpg  disp\nMazda RX4           21.0 160.0\nMazda RX4 Wag       21.0 160.0\nDatsun 710          22.8 108.0\nHornet 4 Drive      21.4 258.0\nHornet Sportabout   18.7 360.0\nValiant             18.1 225.0\nDuster 360          14.3 360.0\nMerc 240D           24.4 146.7\nMerc 230            22.8 140.8\nMerc 280            19.2 167.6\nMerc 280C           17.8 167.6\nMerc 450SE          16.4 275.8\nMerc 450SL          17.3 275.8\nMerc 450SLC         15.2 275.8\nCadillac Fleetwood  10.4 472.0\nLincoln Continental 10.4 460.0\nChrysler Imperial   14.7 440.0\nFiat 128            32.4  78.7\nHonda Civic         30.4  75.7\nToyota Corolla      33.9  71.1\nToyota Corona       21.5 120.1\nDodge Challenger    15.5 318.0\nAMC Javelin         15.2 304.0\nCamaro Z28          13.3 350.0\nPontiac Firebird    19.2 400.0\nFiat X1-9           27.3  79.0\nPorsche 914-2       26.0 120.3\nLotus Europa        30.4  95.1\nFord Pantera L      15.8 351.0\nFerrari Dino        19.7 145.0\nMaserati Bora       15.0 301.0\nVolvo 142E          21.4 121.0\n```\n\n\n:::\n\n```{.r .cell-code}\nmtcars[mtcars$cyl == 4, ]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                mpg cyl  disp  hp drat    wt  qsec vs am gear carb\nDatsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1\nMerc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2\nMerc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2\nFiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1\nHonda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2\nToyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1\nToyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1\nFiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1\nPorsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2\nLotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2\nVolvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2\n```\n\n\n:::\n:::\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}